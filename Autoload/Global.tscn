[gd_scene load_steps=11 format=2]

[ext_resource path="res://Items/Scenes/ItemScimitar.tscn" type="PackedScene" id=1]
[ext_resource path="res://Items/Slot.tscn" type="PackedScene" id=2]
[ext_resource path="res://Items/Scenes/ItemNet.tscn" type="PackedScene" id=3]
[ext_resource path="res://Items/Scenes/ItemHourglass.tscn" type="PackedScene" id=4]
[ext_resource path="res://Items/Scenes/ItemDagger.tscn" type="PackedScene" id=5]
[ext_resource path="res://Items/Scenes/ItemGem.tscn" type="PackedScene" id=6]
[ext_resource path="res://Items/Scenes/ItemShield.tscn" type="PackedScene" id=7]

[sub_resource type="GDScript" id=1]
script/source = "extends Node

var cycle = \"day\"
var cycles = 0

#func _ready():
#	get_tree().connect(\"files_dropped\",self,\"rebalance\")
#	make_config()
	
func make_config():
	var file = ConfigFile.new()
	file.set_value(\"enemies\",\"paramimic\",{\"dmg\":10,\"hp\":400})
	file.save(\"user://config.txt\")
	
func rebalance(files,screen):
	var file = File.new()
	var text
	
	for drop in files:
		file.open(drop,File.READ_WRITE)
		text = file.get_as_text()
		file.close()
		
		file.open(\"user://confix.txt\",File.WRITE)
		file.store_var(text)
		file.close()
		return
"

[sub_resource type="GDScript" id=3]
script/source = "extends GridContainer

export var affinity = \"day\"

func _enter_tree():
	hide()

func _ready():
	Events.connect(\"reset_inventory\",self,\"display\")
	Events.connect(\"battle_ended\",self,\"hide\")

func display():
	if Global.cycle == affinity:
		show()
"

[sub_resource type="GDScript" id=2]
script/source = "extends Sprite

func _draw():
	var data = get_viewport().get_meta(\"drag\",false)
	if data :
#		draw_circle(Vector2(),15,Color.wheat)
		draw_texture(data.get_child(0).texture,Vector2(-24,-24),Color.white)
	
func _process(delta):
	position = get_viewport().get_mouse_position()
	update()
"

[node name="Global" type="CanvasLayer"]
layer = 2
script = SubResource( 1 )

[node name="PlayerInventoryDay" type="GridContainer" parent="."]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -463.0
margin_top = 97.0
margin_right = -151.0
margin_bottom = 253.0
columns = 4
script = SubResource( 3 )

[node name="Slot" parent="PlayerInventoryDay" instance=ExtResource( 2 )]

[node name="ItemScimitar" parent="PlayerInventoryDay/Slot" instance=ExtResource( 1 )]

[node name="Slot2" parent="PlayerInventoryDay" instance=ExtResource( 2 )]
margin_left = 79.0
margin_right = 154.0

[node name="Item" parent="PlayerInventoryDay/Slot2" instance=ExtResource( 5 )]

[node name="Slot3" parent="PlayerInventoryDay" instance=ExtResource( 2 )]
margin_left = 158.0
margin_right = 233.0

[node name="ItemGem" parent="PlayerInventoryDay/Slot3" instance=ExtResource( 6 )]

[node name="Slot4" parent="PlayerInventoryDay" instance=ExtResource( 2 )]
margin_left = 237.0
margin_right = 312.0

[node name="ItemHourglass" parent="PlayerInventoryDay/Slot4" instance=ExtResource( 4 )]

[node name="Slot5" parent="PlayerInventoryDay" instance=ExtResource( 2 )]
margin_top = 80.0
margin_bottom = 156.0

[node name="Item" parent="PlayerInventoryDay/Slot5" instance=ExtResource( 3 )]
margin_left = 3.0
margin_top = -2.0
margin_right = 3.0
margin_bottom = -2.0

[node name="Slot6" parent="PlayerInventoryDay" instance=ExtResource( 2 )]
margin_left = 79.0
margin_top = 80.0
margin_right = 154.0
margin_bottom = 156.0

[node name="Item" parent="PlayerInventoryDay/Slot6" instance=ExtResource( 7 )]

[node name="Slot7" parent="PlayerInventoryDay" instance=ExtResource( 2 )]
margin_left = 158.0
margin_top = 80.0
margin_right = 233.0
margin_bottom = 156.0

[node name="Slot8" parent="PlayerInventoryDay" instance=ExtResource( 2 )]
margin_left = 237.0
margin_top = 80.0
margin_right = 312.0
margin_bottom = 156.0

[node name="PlayerInventoryNight" type="GridContainer" parent="."]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -463.0
margin_top = 97.0
margin_right = -151.0
margin_bottom = 253.0
columns = 4
script = SubResource( 3 )
affinity = "night"

[node name="Slot" parent="PlayerInventoryNight" instance=ExtResource( 2 )]

[node name="ItemScimitar" parent="PlayerInventoryNight/Slot" instance=ExtResource( 1 )]

[node name="Slot2" parent="PlayerInventoryNight" instance=ExtResource( 2 )]
margin_left = 79.0
margin_right = 154.0

[node name="Item" parent="PlayerInventoryNight/Slot2" instance=ExtResource( 5 )]

[node name="Slot3" parent="PlayerInventoryNight" instance=ExtResource( 2 )]
margin_left = 158.0
margin_right = 233.0

[node name="Slot4" parent="PlayerInventoryNight" instance=ExtResource( 2 )]
margin_left = 237.0
margin_right = 312.0

[node name="ItemHourglass" parent="PlayerInventoryNight/Slot4" instance=ExtResource( 4 )]

[node name="Slot5" parent="PlayerInventoryNight" instance=ExtResource( 2 )]
margin_top = 80.0
margin_bottom = 156.0

[node name="Item" parent="PlayerInventoryNight/Slot5" instance=ExtResource( 3 )]
margin_left = 3.0
margin_top = -2.0
margin_right = 3.0
margin_bottom = -2.0

[node name="Slot6" parent="PlayerInventoryNight" instance=ExtResource( 2 )]
margin_left = 79.0
margin_top = 80.0
margin_right = 154.0
margin_bottom = 156.0

[node name="Item" parent="PlayerInventoryNight/Slot6" instance=ExtResource( 7 )]

[node name="Slot7" parent="PlayerInventoryNight" instance=ExtResource( 2 )]
margin_left = 158.0
margin_top = 80.0
margin_right = 233.0
margin_bottom = 156.0

[node name="Slot8" parent="PlayerInventoryNight" instance=ExtResource( 2 )]
margin_left = 237.0
margin_top = 80.0
margin_right = 312.0
margin_bottom = 156.0

[node name="ItemGem" parent="PlayerInventoryNight/Slot8" instance=ExtResource( 6 )]

[node name="Sprite" type="Sprite" parent="."]
script = SubResource( 2 )
